{"version":3,"file":"public/scripts/app.js","sources":["app/application.coffee","app/collections/items.coffee","app/collections/receiptdetails.coffee","app/collections/receipts.coffee","app/collections/sections.coffee","app/initialize.coffee","app/models/item.coffee","app/models/receipt.coffee","app/models/receiptdetail.coffee","app/models/section.coffee","app/router.coffee","app/templates/app.jade","app/templates/details.jade","app/templates/item.jade","app/templates/modal_step1.jade","app/templates/preview.jade","app/views/app.coffee","app/views/details.coffee","app/views/item.coffee","app/views/modal_step1.coffee","app/views/preview.coffee"],"names":[],"mappings":"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;;ACAA;;MAAM,CAAC,OAAP,GAAiB,UAAU,QAAQ,CAAC,KAAK,CAAC,MAAf,CAAsB,EAAtB,CAA3B;A;;;ACAA;;MAAM,CAAC,OAAP,GAAiB,gBAAgB,QAAQ,CAAC,KAAK,CAAC,MAAf,CAAsB,EAAtB,CAAjC;A;;;ACAA;;MAAM,CAAC,OAAP,GAAiB,UAAU,QAAQ,CAAC,KAAK,CAAC,MAAf,CAAsB,EAAtB,CAA3B;A;;;ACAA;;UAAU,QAAQ,WAAR,CAAV;;cACA,GAAiB,QAAQ,mBAAR,CADjB;;uBAEA,GAA0B,QAAQ,4BAAR,CAF1B;;KAGA,GAAY,oBAHZ;;cAIA,GAAqB,6BAJrB;;MAKM,CAAC,OAAP,GAAiB,SAAS,QAAQ,CAAC,MAAM,CAAC,MAAhB,CACxB;UACE;QAAI,MAAJ;GADF;EAGA,MAAM;AACJ;eAAe,YACb;kBAAY,KAAZ;MACA,mBAAmB,cADnB;KADa,CAAf;IAIA,QAAQ,CAAC,MAAT,EAJA,CADI;GAHN;CADwB,CAL1B;A;;CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9JA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlJA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","sourcesContent":["module.exports = initialize: ->\n  Router = require(\"router\")\n  @router = new Router()\n  Backbone.history.start()\n  return\n","Item = require(\"../models/item\")\nmodule.exports = Items = Backbone.Collection.extend(\n  model: Item\n  url: \"items\"\n  seed: ->\n    console.log \"Hello! Here is an example\"\n    @create\n      item:\n        context: \"http://respublica.io/schema/items.jsonld\"\n        label: \"Pour l'exemple\"\n        wikidata:\n            Q1570277:\n              label:\n                fr: \"Pour l'exemple\"\n                en: \"King & Country\"\n        gtin: \"1234567890\"\n      tags:\n        wikidata:\n          P31:\n            Q5294:\n              label:\n                fr: \"DVD\"\n                en: \"DVD\"\n      attachements:\n        pictures:\n          thumbnail: \"http://ecx.images-amazon.com/images/I/51X7fmX0clL._SY100_.jpg\"\n      history:\n        context: \"http://respublica.io/schema/transaction-history.jsonld\"\n        last:\n          from:\n            label:\n              fr: 'Fnac'\n            wikidata: 'Q676585'\n          transaction:\n            type:\n              label:\n                fr: \"vente\"\n              wikidata: \"Q194189\"\n            date: ((new Date).toJSON())\n      comment:\n        \"voici un exemple d'objet ajouté à votre inventaire personnel !\"\n)\n\n# seed: function(){\n#     // not working\n#     console.log('seeding!')\n#     this.create({\n#         id:\"1231512512341512412\",\n#         title: \"Pelle à picous\",\n#         comment: \"Très belle pelle\",\n#         trace: [\n#                 \"intermarché\"\n#             ],\n#         category: [\n#             \"Bricolage\",\n#             \"Pelle\",\n#             \"Pelle à picous\"\n#         ],\n#         barcode: \"1248193523\",\n#         url: \"http://pelle-a-picous.love\"\n#     });\n# }\n","ReceiptDetail = require(\"../models/receiptdetail\")\nmodule.exports = ReceiptDetails = Backbone.Collection.extend(\n  model: ReceiptDetail\n  url: \"receiptdetails\"\n)\n","Receipt = require(\"../models/receipt\")\nmodule.exports = Receipts = Backbone.Collection.extend(\n  model: Receipt\n  url: \"receipts\"\n)\n","Section = require(\"../models/section\")\nmodule.exports = Sections = Backbone.Collection.extend(\n  initialize: (models, options) ->\n    @receiptId = options.receiptId\n    return\n\n  url: ->\n    \"receipts/\" + @receiptId + \"/sections\"\n\n  model: Section\n)\n","# The function called from index.html\n$(document).ready ->\n  app = require(\"application\")\n  app.initialize()\n  $(document).foundation()\n\nwindow.reinitilizeLocalValues = ->\n  window.local =\n    selectedTicket: `undefined`\n    selectedItem: `undefined`\n    selectedItemId: `undefined`\n\n  $(\".dynOption option\").remove()\n  $(\".dynOption\").append \"<option class=\\\"option_placeholder\\\">- Choisissez une option -<option>\"\n\nreinitilizeLocalValues()\nwindow.prettyDate = (rawDate) ->\n  d = new Date(rawDate)\n  jour = d.getDate()\n  mois = d.getMonth()\n  annee = d.getFullYear()\n  heure = d.getHours()\n  minute = d.getMinutes()\n  minute = \"0\" + minute  if minute < 10\n  jour = \"0\" + jour  if jour < 10\n  switch mois\n    when 0 then mois = \"Jan\"\n    when 1 then mois = \"Fev\"\n    when 2 then mois = \"Mar\"\n    when 3 then mois = \"Avr\"\n    when 4 then mois = \"Mai\"\n    when 5 then mois = \"Jun\"\n    when 6 then mois = \"Jui\"\n    when 7 then mois = \"Aou\"\n    when 8 then mois = \"Sep\"\n    when 9 then mois = \"Oct\"\n    when 10 then mois = \"Nov\"\n    when 11 then mois = \"Dec\"\n  return jour + \"-\" + mois + \"-\" + annee + \", \" + heure + \":\" + minute\n\nString::upAndDownCase = ->\n  @charAt(0).toUpperCase() + @slice(1).toLowerCase()\n\nwindow.listToReorder = (listToReorder, listitems) ->\n  listitems.sort (a, b) ->\n    $(a).text().toUpperCase().localeCompare $(b).text().toUpperCase()\n\n  $.each listitems, (idx, itm) ->\n    listToReorder.append itm\n    return\n\n  return\n\nwindow.loaderStart = ->\n  $('.loading').fadeIn()\n  setTimeout(loaderStop, 5000)\n\nwindow.loaderStop = ->\n  $('.loading').fadeOut()\n\n\nwindow.getRespublicaIoData = (domain, uri)->\n  query = \"http://respublica.io/api/#{domain}/#{uri})\"\n  console.log \"querying\"\n  console.log query\n  res = $.getJSON(query)\n  console.log res\n  return res.responseJSON","module.exports = Item = Backbone.Model.extend({})\n","module.exports = Receipt = Backbone.Model.extend({})\n","module.exports = ReceiptDetail = Backbone.Model.extend({})\n","module.exports = Section = Backbone.Model.extend({})\n","AppView = require(\"views/app\")\nItemCollection = require(\"collections/items\")\nReceiptDetailCollection = require(\"collections/receiptdetails\")\nitems = new ItemCollection()\nreceiptdetails = new ReceiptDetailCollection()\nmodule.exports = Router = Backbone.Router.extend(\n  routes:\n    \"\": \"main\"\n\n  main: ->\n    mainView = new AppView(\n      collection: items\n      receiptcollection: receiptdetails\n    )\n    mainView.render()\n    return\n)","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<main><div class=\"row\"><div class=\"large-8 columns\"><h1>Mes Objets</h1><h4>Centralisez les données de vos achats et objets !</h4></div><div id=\"menu\" class=\"large-4 columns\"><a id=\"additembutton\" href=\"#\" data-reveal-id=\"step1\" class=\"success radius button\">Ajouter un objet</a></div><div class=\"large-12 columns\"><p>Mes Objets vous aide à dresser l\\'<strong>inventaire de vos objets</strong>&nbsp;en s\\'appuyant sur les données fournies par les &nbsp;<strong>entreprises partenaires</strong>&nbsp;(actuellement seulement Intermarché). Outre cet aide-mémoire pour vos achats importants, l\\'application vise à tirer toute la puissance du web des données ouvertes (\"<em>Linked Open Data</em>\") pour enrichir l\\'information sur vos objets. Encore minimal au moment de ce prototype, cette fonctionnalités de centralisation et de structure des données sur les objets devra permettre à l\\'avenir la&nbsp;<strong>réutilisation de ces données</strong>&nbsp;par d\\'autres applications, par exemple pour des applications d\\'économie collaborative (revente, troc, don, prêt...).</p></div></div><div class=\"row\"><table width=\"100%\"><thead><tr><th>Image</th><th>Titre</th><th>Catégories</th><th>Source</th><th>Pièce jointes</th><th>Commentaire</th><th>Action</th></tr></thead><tbody></tbody></table><div id=\"details\" class=\"panel\"><p><em>Selectionnez un objet pour voir ses informations</em></p></div></div></main><footer><div class=\"row\"><div class=\"text-center columns\"><a id=\"tour\" href=\"#\" class=\"radius button\">Visite guidée</a></div></div><div class=\"row\"><div class=\"text-center columns credits\"><a href=\"http://respublica.io/concours-mesinfos/about\">A propos</a></div><!--<Reveal>Modals begin</Reveal>--><div id=\"step1\" data-reveal=\"data-reveal\" class=\"reveal-modal\"></div><div id=\"step2\" data-reveal=\"data-reveal\" class=\"reveal-modal\"><form data-abide=\"data-abide\"><h2>Etape 2 : Compléter les données récoltées</h2><p>Ajoutez des informations ou éditez celles collectées</p><div id=\"title\"><label>Titre:</label><input type=\"text\" name=\"title\" required=\"required\"/></div><div id=\"barcode\"><label>Code barre:</label><input type=\"text\" name=\"barcode\" required pattern=\"number\"/></div><div id=\"vendor\"><label>Vendeur</label><input type=\"text\" name=\"vendor\"/></div><div id=\"price\"><label>Prix</label><input type=\"text\" name=\"price\"/></div><div id=\"comment\"><label>Comment: (optionel)</label><textarea name=\"comment\"></textarea></div><a href=\"#\" id=\"add-item\" type=\"submit\" class=\"success radius button right\">Ajouter l\\'objet à l\\'inventaire</a><a href=\"#\" data-reveal-id=\"step1\" type=\"submit\" id=\"prev\" class=\"radius button\">Retour à l\\'étape 1</a></form><a class=\"close-reveal-modal\">×</a></div><!--<Reveal>Modals end</Reveal>--></div></footer><div id=\"loadbg\" class=\"loading\"></div><div class=\"row loading\"><div class=\"large-offset-5 large-2 small-offset-5 small-2\"><div id=\"circleG\"><div id=\"circleG_1\" class=\"circleG\"></div><div id=\"circleG_2\" class=\"circleG\"></div><div id=\"circleG_3\" class=\"circleG\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row\"><div class=\"large-6 small-12 columns\"><h4>Objet</h4>');\nif ( item.label)\n{\nbuf.push('<strong>Nom</strong><p>');\nvar __val__ = item.label\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nif ( comment)\n{\nbuf.push('<strong>Commentaire</strong><p>');\nvar __val__ = comment\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nif ( item.gtin)\n{\nbuf.push('<strong>Code barre</strong><p>');\nvar __val__ = item.gtin\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nbuf.push('<hr/><h4>Transaction</h4><p></p>');\nif ( history && history.last)\n{\nif ( history.last.from && history.last.from.label && history.last.from.label.fr)\n{\nbuf.push('<strong>Précedent propriétaire</strong><p>');\nvar __val__ = history.last.from.label.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nif ( history.last.date)\n{\nbuf.push('<strong>date</strong><p>');\nvar __val__ = history.last.date\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nif ( history.last.type && history.last.type.label)\n{\nbuf.push('<strong>Type de transaction</strong><p>');\nvar __val__ = history.last.type.label.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\nif ( history.last.price)\n{\nbuf.push('<strong>Prix</strong><p>');\nvar __val__ = history.last.price\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p>');\n}\n}\nbuf.push('<hr/><strong>Cet objet sur Wikidata</strong><p></p>');\nif ( item.wikidata)\n{\nif ( item.wikidata.Q1570277.label.fr)\n{\nbuf.push('<a href=\"https://www.wikidata.org/wiki/Q1570277\">' + escape((interp = item.wikidata.Q1570277.label.fr) == null ? '' : interp) + '</a>');\n}\n// iterate item.wikidata\n;(function(){\n  if ('number' == typeof item.wikidata.length) {\n\n    for (var v = 0, $$l = item.wikidata.length; v < $$l; v++) {\n      var k = item.wikidata[v];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"https://www.wikidata.org/wiki/\" + (k) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = v.fr) == null ? '' : interp) + '</a>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var v in item.wikidata) {\n      $$l++;      var k = item.wikidata[v];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"https://www.wikidata.org/wiki/\" + (k) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = v.fr) == null ? '' : interp) + '</a>');\n    }\n\n  }\n}).call(this);\n\n}\nif ( tags.wikidata)\n{\n// iterate tags.wikidata\n;(function(){\n  if ('number' == typeof tags.wikidata.length) {\n\n    for (var wdid = 0, $$l = tags.wikidata.length; wdid < $$l; wdid++) {\n      var P31 = tags.wikidata[wdid];\n\nif ( wdid.label)\n{\nbuf.push('<label>Catégories</label><a');\nbuf.push(attrs({ 'href':(\"https://www.wikidata.org/wiki/\" + (wdid) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = wdid.label.fr) == null ? '' : interp) + '</a>');\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var wdid in tags.wikidata) {\n      $$l++;      var P31 = tags.wikidata[wdid];\n\nif ( wdid.label)\n{\nbuf.push('<label>Catégories</label><a');\nbuf.push(attrs({ 'href':(\"https://www.wikidata.org/wiki/\" + (wdid) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = wdid.label.fr) == null ? '' : interp) + '</a>');\n}\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push('<hr/><strong>Cet objet sur OpenFoodFact</strong><hr/><strong>Cet objet sur ProductOpenData</strong><hr/><strong>Cet objet sur Respublica.io</strong></div><div class=\"large-4 large-offset-2 small-12 columns\">');\nif ( attachements && attachements.pictures)\n{\n// iterate attachements.pictures\n;(function(){\n  if ('number' == typeof attachements.pictures.length) {\n\n    for (var key = 0, $$l = attachements.pictures.length; key < $$l; key++) {\n      var value = attachements.pictures[key];\n\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (value) + \"\"), 'alt':(\"\" + (key) + \"\") }, {\"src\":true,\"alt\":true}));\nbuf.push('/>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var key in attachements.pictures) {\n      $$l++;      var value = attachements.pictures[key];\n\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (value) + \"\"), 'alt':(\"\" + (key) + \"\") }, {\"src\":true,\"alt\":true}));\nbuf.push('/>');\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td class=\"pic\">');\nif ( item.attachements && item.attachements.pictures)\n{\n// iterate item.attachements.pictures\n;(function(){\n  if ('number' == typeof item.attachements.pictures.length) {\n\n    for (var key = 0, $$l = item.attachements.pictures.length; key < $$l; key++) {\n      var value = item.attachements.pictures[key];\n\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (value) + \"\"), 'alt':(\"\" + (key) + \"\") }, {\"src\":true,\"alt\":true}));\nbuf.push('/>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var key in item.attachements.pictures) {\n      $$l++;      var value = item.attachements.pictures[key];\n\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (value) + \"\"), 'alt':(\"\" + (key) + \"\") }, {\"src\":true,\"alt\":true}));\nbuf.push('/>');\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push('</td><td class=\"title\">');\nif ( item.item.label)\n{\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"item#show/\" + (item.id) + \"\"), 'id':(\"\" + (item.id) + \"\"), \"class\": (\"itemId\") }, {\"href\":true,\"class\":true,\"id\":true}));\nbuf.push('>');\nvar __val__ = item.item.label\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nbuf.push('</td><td class=\"tags\"><ul>');\nif ( item.tags && item.tags.wikidata && item.tags.wikidata.P31)\n{\n// iterate item.tags.wikidata.P31\n;(function(){\n  if ('number' == typeof item.tags.wikidata.P31.length) {\n\n    for (var key = 0, $$l = item.tags.wikidata.P31.length; key < $$l; key++) {\n      var value = item.tags.wikidata.P31[key];\n\n// iterate value\n;(function(){\n  if ('number' == typeof value.length) {\n\n    for (var k = 0, $$l = value.length; k < $$l; k++) {\n      var v = value[k];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (key) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = v.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var k in value) {\n      $$l++;      var v = value[k];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (key) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = v.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n    }\n\n  }\n}).call(this);\n\n    }\n\n  } else {\n    var $$l = 0;\n    for (var key in item.tags.wikidata.P31) {\n      $$l++;      var value = item.tags.wikidata.P31[key];\n\n// iterate value\n;(function(){\n  if ('number' == typeof value.length) {\n\n    for (var k = 0, $$l = value.length; k < $$l; k++) {\n      var v = value[k];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (key) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = v.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var k in value) {\n      $$l++;      var v = value[k];\n\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (key) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = v.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n    }\n\n  }\n}).call(this);\n\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push('</ul></td><td class=\"source\">');\nif ( item.history.last)\n{\nbuf.push('<span>');\nvar __val__ = item.history.last.from.label.fr\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><span>');\nvar __val__ = item.history.last.date\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>');\n}\nbuf.push('</td><td class=\"attachements\"></td><td class=\"comment\"><span>');\nvar __val__ = item.comment\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></td><td class=\"actions\"><a title=\"Editer\" class=\"edit\"><i class=\"fa fa-pencil\"></i></a><a title=\"Supprimer\" class=\"delete\"><i class=\"fa fa-times\"></i></a></td>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<h2>Etape 1 : Attacher des preuves d\\'achat</h2><p>Choisissez les données relatives à l\\'objet que vous souhaitez ajouter à votre inventaire</p><form><div id=\"sources\" class=\"fields\"><label class=\"superlab\">Source</label><select id=\"source\" name=\"source\"><option value=\"null\">* Choisissez une source d\\'information *</option><option value=\"intermarche\">Intermarché</option><option value=\"manuel\">Ajout manuel (passer directement à l\\'étape 2)</option></select></div><div id=\"receipts\" class=\"fields\"><label class=\"superlab\">Tickets de caisse</label><select id=\"receipt\" name=\"receipt\" class=\"dynOption\"><option value=\"null\">* Choisissez un ticket de caisse *</option></select></div><div id=\"receiptelements\" class=\"fields\"><label class=\"superlab\">Détails du ticket<select id=\"receipt_details\" name=\"receipt_details\" class=\"dynOption\"><option value=\"null\">* Choisissez une ligne du ticket *</option></select></label></div><div id=\"detailspreview\" class=\"panel\"></div><div id=\"additionaldata\" class=\"panel\"></div></form><div id=\"manualbarcode\"><span>ou entrer le code bar manuellement<input placeholder=\"barcode\"/></span></div><a href=\"#\" data-reveal-id=\"step2\" type=\"submit\" id=\"next\" class=\"success radius button right\">Etape 2...</a><a class=\"close-reveal-modal\">×</a>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row\"><div class=\"large-4 small-12 columns\"><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Nom de l\\'article</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof name !== \"undefined\")\n{\nvar __val__ = name\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Quantité</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof amount !== \"undefined\")\n{\nvar __val__ = amount\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Prix</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof price !== \"undefined\")\n{\nvar __val__ = price + \" €\"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Quantité</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof quantityLabel !== \"undefined\")\n{\nvar __val__ = quantityLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Code Barre</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof barcode !== \"undefined\")\n{\nvar __val__ = barcode\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Label</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof label !== \"undefined\")\n{\nvar __val__ = label\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Section</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof sectionLabel !== \"undefined\")\n{\nvar __val__ = sectionLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Identifiant du magasin</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof intermarcheShopId !== \"undefined\")\n{\nvar __val__ = intermarcheShopId\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Date</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof timestamp !== \"undefined\")\n{\nvar __val__ = prettyDate(timestamp)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div></div><div class=\"large-4 small-12 columns\">');\nif ( barcode.lenght = 13)\n{\nbuf.push('<img');\nbuf.push(attrs({ 'src':('http://drive.intermarche.com/ressources/images/produit/zoom/0' + (barcode) + '.jpg'), 'alt':('' + (name) + ''), 'id':('preview_image') }, {\"src\":true,\"alt\":true,\"id\":true}));\nbuf.push('/>');\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","ItemView = require(\"./item\")\nStep1 = require(\"./modal_step1\")\nmodule.exports = AppView = Backbone.View.extend(\n  el: \"body\"\n  template: require(\"../templates/app\")\n  events:\n    \"click #add-item\": \"createItem\"\n\n  # initialize is automatically called once after the view is contructed\n  initialize: ->\n    @listenTo @collection, \"add\", @onItemAdded\n\n  render: ->\n\n    # we render the template\n    @$el.html @template()\n    step1 = new Step1()\n    step1.render()\n\n    # fetch the items from the database\n    @collection.fetch()\n    loaderStart()\n    setTimeout (=>\n      @collection.seed() if @collection.length is 0\n      ), 3000\n\n    # this.collection.seed()\n    appjs = this\n    $(document).on \"opened\", \"[data-reveal]\", ->\n      appjs.fillFields()\n\n\n  createItem: (event) ->\n\n    # submit button reload the page, we don't want that\n    event.preventDefault()\n    # if local.selectedItem.barcode && local.selectedItem.barcode.length > 7\n\n    # add it to the collection\n    itemData =\n      item:\n        context: \"http://respublica.io/schema/items.jsonld\"\n        label: @$el.find(\"input[name=\\\"title\\\"]\").val()\n        gtin: @$el.find(\"input[name=\\\"barcode\\\"]\").val() || local.selectedItem.barcode\n        wikidata: undefined\n      tags:\n        wikidata:\n          P31:\n            undefined\n      attachements:\n        pictures:\n          thumbnail: undefined\n        receipt: local.selectedItem\n      history:\n        context: \"http://respublica.io/schema/transaction-history.jsonld\"\n        last:\n          from:\n            label:\n              fr: @$el.find(\"input[name=\\\"vendor\\\"]\").val() || local.selectedItem.origin\n          transaction:\n            price: @$el.find(\"input[name=\\\"price\\\"]\").val() || local.selectedItem.price\n            type:\n              label:\n                fr: \"vente\"\n              wikidata: \"Q194189\"\n            date: local.selectedItem.timestamp || ((new Date).toJSON())\n      comment: @$el.find(\"textarea[name=\\\"comment\\\"]\").val()\n\n\n    if local.selectedItem.origin is \"Intermarché\"\n      itemData.history.last.from.label.fr = \"Intermarché\"\n      itemData.attachements.pictures.thumbnail = \"http://drive.intermarche.com/ressources/images/produit/zoom/0#{local.selectedItem.barcode}.jpg\"\n\n\n    if local.rpio?\n      itemData.tags = local.rpio.item.wikidata.P31\n      itemData.item.respublica_io = local.rpio.item['@id']\n\n    @collection.create itemData\n    $(\"#step2\").foundation \"reveal\", \"close\"\n\n  # updateItem: function(event) {\n  #     var that = this\n  #     this.model.save({\n  #         barcode: this.$el.find('input[name=\"barcode\"]').val() // ou qqch comme ça\n  #     },\n  #     // alternative: ajouter un change listner qui rerender le bouzin\n  #     {\n  #         success: function(){\n  #             that.render()\n  #         },\n  #         error: function(){\n  #             console.log('doh!')\n  #         }\n  #     })\n  # },\n  onItemAdded: (item) ->\n\n    # render the specific element\n    $('.loading').fadeOut()\n    itemView = new ItemView(model: item)\n    itemView.render()\n    @$el.find(\"tbody\").append itemView.$el\n\n  fillFields: ->\n\n    # BARCODE\n    if local.selectedItem\n      if local.selectedItem.barcode\n        $(\"#barcode\").children('input').remove()\n        $(\"#barcode\").children('p').remove()\n        $(\"#barcode\").append '<p>' + local.selectedItem.barcode + '<p>'\n\n    #VENDOR\n      if local.selectedItem.origin\n              $(\"#vendor\").children('input').remove()\n              $(\"#vendor\").children('p').remove()\n              $(\"#vendor\").append '<p>' + local.selectedItem.origin + '<p>'\n    #PRICE\n      if local.selectedItem.price\n              $(\"#price\").children('input').remove()\n              $(\"#price\").children('p').remove()\n              $(\"#price\").append '<p>' + local.selectedItem.price + '€ <p>'\n\n    #TITLE\n    $(\"#title input\").val local.selectedItem.name.upAndDownCase()  if local.selectedItem and local.selectedItem.name\n)","module.exports = ItemDetails = Backbone.View.extend(\n  el: \"div\"\n  template: require(\"../templates/details\")\n\n  # events: {\n  # 'change #proof_source': 'getProofOptions',\n  # 'change #receipt': 'getReceiptSections',\n  # 'change #receiptelements': 'updateDetailsPreview'\n  # },\n  render: ->\n    $(\"#details\").html ''\n    console.log @model\n    $(\"#details\").html @template(@model.toJSON())\n    return @\n)","Details = require(\"./details\")\n\nmodule.exports = Item = Backbone.View.extend(\n  tagName: \"tr\"\n  template: require(\"../templates/item\")\n  events:\n    \"click a.delete\": \"deleteItem\"\n    \"click a.edit\": \"editItem\"\n    \"click a.itemId\": \"showDetails\"\n\n  render: ->\n    @$el.html @template(item: @model.toJSON())\n\n  deleteItem: (e)->\n    e.preventDefault()\n    @model.destroy()\n    @remove()\n\n  editItem: (e)->\n    e.preventDefault()\n    alert \"La fonction d'édition des objets n'a pas pu être réalisée dans les temps pour le concours MesInfos, elle sera ajouter à la prochaine version. Toutes nos excuses pour la gène occasionnée.\"\n\n  showDetails: (e)->\n    e.preventDefault()\n\n    details = new Details(model: @model)\n    details.render()\n\n)\n","ReceiptDetailsCollection = require(\"../collections/receiptdetails\")\nSectionCollection = require(\"../collections/sections\")\nReceiptDetailsCollection = require(\"../collections/receiptdetails\")\nReceiptsCollection = require(\"../collections/receipts\")\nPreview = require(\"./preview\")\n\nmodule.exports = ReceiptDetail = Backbone.View.extend(\n  el: \"#step1\"\n  template: require(\"../templates/modal_step1\")\n  events:\n    \"change #source\": \"getProofOptions\"\n    \"change #receipt\": \"getReceiptSections\"\n    \"change #receiptelements\": \"updateDetailsPreview\"\n\n  render: ->\n    @$el.html @template({})\n    $(\"#sources\").fadeIn 1000\n    return\n\n  getProofOptions: ->\n    $(\"#receiptelements\").hide()\n    $(\"#receipts\").hide()\n    $(\"#detailspreview\").hide()\n    reinitilizeLocalValues()\n    switch $(\"#source\").val()\n      when \"intermarche\"\n        $(\"#receipts\").fadeIn 1500\n        @receiptsCollection = new ReceiptsCollection\n        @receiptsCollection.fetch()\n        loaderStart()\n        @listenTo @receiptsCollection, \"add\", @onReceiptsAdded\n      when \"manuel\"\n        $(\"#next\").trigger \"click\"\n\n\n  # SPECIFIQUE INTERMARCHE\n  onReceiptsAdded: (model) ->\n    opt = $(\"<option>\").val(model.get(\"receiptId\")).text(prettyDate(model.get(\"timestamp\")) + \" - \" + model.get(\"articlesCount\") + \" articles\")\n    @$(\"#receipts select\").append opt\n    loaderStop()\n\n  getReceiptSections: ->\n    $(\"#receiptelements option\").remove()\n    $(\"#detailspreview\").hide().html \"\"\n    @selectedReceiptId = $(\"#receipt\").val()\n    @sectionCollection = new SectionCollection([],\n      receiptId: @selectedReceiptId\n    )\n    @sectionCollection.fetch()\n    loaderStart()\n    @listenTo @sectionCollection, \"add\", @onReceiptSections\n    window.local.selectedTicket = {}\n\n  onReceiptSections: (model) ->\n    $ \"#receiptelements\"\n    $(\"#receiptelements\").fadeIn 1500\n    $(\"#receiptelements div\").fadeIn 1500\n    opt = $(\"<option>\").val(model.id).text((model.get(\"sectionLabel\").upAndDownCase()) + \" - \" + model.get(\"name\") + \" - \" + model.get(\"price\") + \"€\")\n    @$(\"#receiptelements select\").append opt\n    window.local.selectedTicket[model.id] = model.attributes\n    listToReorder $(\"#receiptelements select\"), $(\"#receiptelements select\").children(\"option\").get()\n    loaderStop()\n\n  updateDetailsPreview: ->\n    console.log \"updateprev\"\n    $(\"#detailspreview\").hide().html \"\"\n    window.local.selectedItemId = $(\"#receiptelements select\").val()\n    window.local.selectedItem = window.local.selectedTicket[window.local.selectedItemId]\n\n    if window.local.selectedItem.barcode.length < 7\n      delete window.local.selectedItem.barcode\n    else\n      window.local.rpio = getRespublicaIoData('gtin', local.selectedItem.barcode)\n\n    preview = new Preview(model: window.local.selectedItem)\n    preview.render()\n    $(\"#detailspreview\").fadeIn 500\n    $(\"#detailspreview div\").fadeIn 500\n)\n\n# $('#preview_image').error(this.$('#preview_image').hide())\n","module.exports = ReceiptDetailPreview = Backbone.View.extend(\n  el: \"div\"\n  template: require(\"../templates/preview\")\n\n  # events: {\n  # 'change #proof_source': 'getProofOptions',\n  # 'change #receipt': 'getReceiptSections',\n  # 'change #receiptelements': 'updateDetailsPreview'\n  # },\n  render: ->\n    $(\"#detailspreview\").html @template(@model)\n    return @\n)"]}